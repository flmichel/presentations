<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Petit Wedding Gifts</title>
    <style>
      :root {
        --ink: #0f172a;
        --muted: #5b6477;
        --card: rgba(255, 255, 255, 0.92);
        --accent: #f582ae;
        --accent-2: #9b8cff;
        --nav-offset: 72px;
      }

      * {
        box-sizing: border-box;
      }

      body {
        margin: 0;
        font-family: "Avenir Next", "SF Pro Display", "Segoe UI",
          "Helvetica Neue", sans-serif;
        background: linear-gradient(
          135deg,
          #f7f2ff 0%,
          #fff7f0 50%,
          #f0f8ff 100%
        );
        color: var(--ink);
        min-height: 100vh;
        position: relative;
        overflow-x: hidden;
      }

      body::before {
        content: "";
        position: fixed;
        inset: 0;
        background-image: radial-gradient(
            circle at 20% 20%,
            rgba(155, 140, 255, 0.25) 0 20%,
            transparent 30%
          ),
          radial-gradient(
            circle at 80% 10%,
            rgba(245, 130, 174, 0.23) 0 16%,
            transparent 25%
          ),
          radial-gradient(
            circle at 70% 80%,
            rgba(255, 194, 102, 0.22) 0 18%,
            transparent 28%
          ),
          radial-gradient(#e7e6ff 1px, transparent 1px);
        background-size: auto, auto, auto, 32px 32px;
        opacity: 0.75;
        z-index: -1;
      }

      main {
        padding: var(--nav-offset) 18px 56px;
        max-width: 560px;
        margin: 0 auto;
      }

      header {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        z-index: 10;
        backdrop-filter: blur(12px);
        background: rgba(255, 255, 255, 0.72);
        padding: 10px 18px 4px;
        width: 100%;
      }

      .header-inner {
        max-width: 560px;
        margin: 0 auto;
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 12px;
        width: 100%;
      }

      .brand {
        display: flex;
        align-items: center;
        gap: 10px;
      }

      .brand h1 {
        margin: 0;
        font-size: 18px;
        letter-spacing: -0.3px;
      }

      .eyebrow {
        color: var(--muted);
        font-size: 12px;
        letter-spacing: 0.6px;
        text-transform: uppercase;
        margin: 0 0 4px;
      }

      .flag-switch {
        display: flex;
        gap: 8px;
      }

      .flag {
        width: 52px;
        height: 34px;
        border: 1px solid rgba(0, 0, 0, 0.08);
        border-radius: 12px;
        box-shadow: 0 8px 16px rgba(0, 0, 0, 0.08);
        cursor: pointer;
        padding: 0;
        background-size: cover;
        transition: transform 0.15s ease, box-shadow 0.15s ease,
          border-color 0.2s ease;
        position: relative;
      }

      .flag:focus-visible {
        outline: 2px solid var(--accent);
        outline-offset: 3px;
      }

      .flag:hover {
        transform: translateY(-1px);
        box-shadow: 0 10px 20px rgba(0, 0, 0, 0.12);
      }

      .flag.active {
        border-color: var(--accent);
        transform: translateY(-2px) scale(1.1);
        box-shadow: 0 14px 28px rgba(245, 130, 174, 0.25);
      }

      .flag-en {
        background: linear-gradient(
            90deg,
            transparent 42%,
            #c8102e 42% 58%,
            transparent 58%
          ),
          linear-gradient(transparent 42%, #c8102e 42% 58%, transparent 58%),
          #fff;
      }

      .flag-fr {
        background: linear-gradient(
          90deg,
          #002395 0 33%,
          #ffffff 33% 66%,
          #ed2939 66% 100%
        );
      }

      .flag-jp {
        background: radial-gradient(
            circle at center,
            #bc002d 0 36%,
            transparent 36%
          ),
          #ffffff;
      }

      .grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
        gap: 14px;
      }

      .gift-card {
        border: none;
        padding: 10px;
        border-radius: 16px;
        background: var(--card);
        box-shadow: 0 12px 24px rgba(0, 0, 0, 0.08);
        cursor: pointer;
        text-align: left;
        transition: transform 0.15s ease, box-shadow 0.2s ease;
        display: flex;
        flex-direction: column;
        align-items: flex-start;
      }

      .gift-card:hover {
        transform: translateY(-2px);
        box-shadow: 0 16px 30px rgba(0, 0, 0, 0.1);
      }

      .gift-card img {
        width: 100%;
        aspect-ratio: 4 / 3;
        object-fit: cover;
        border-radius: 12px;
        background: linear-gradient(145deg, #f5d7ff, #fff0f6);
        box-shadow: inset 0 0 0 1px rgba(255, 255, 255, 0.6);
      }

      .card-title {
        margin: 10px 0 2px;
        font-weight: 700;
        font-size: 16px;
        letter-spacing: -0.2px;
      }

      .card-note {
        margin: 0;
        color: var(--muted);
        font-size: 13px;
      }

      .pill {
        display: inline-flex;
        align-items: center;
        gap: 6px;
        padding: 6px 10px;
        border-radius: 999px;
        background: rgba(245, 130, 174, 0.12);
        color: #c73672;
        font-size: 12px;
        margin-bottom: 6px;
        letter-spacing: 0.2px;
      }

      .hidden {
        display: none !important;
      }

      .detail {
        margin-top: 8px;
        padding: 16px;
        border-radius: 18px;
        background: var(--card);
        box-shadow: 0 14px 30px rgba(0, 0, 0, 0.1);
      }

      .detail.hidden {
        display: none;
      }

      .detail img {
        width: 100%;
        border-radius: 16px;
        aspect-ratio: 4 / 3;
        object-fit: cover;
        margin-bottom: 14px;
        background: linear-gradient(145deg, #e2f3ff, #fdf7ff);
      }

      .detail h3 {
        margin: 0 0 8px;
        font-size: 22px;
        letter-spacing: -0.4px;
      }

      .detail p {
        margin: 0 0 6px;
        color: var(--muted);
        line-height: 1.65;
        font-size: 15px;
      }

      .nav-back {
        display: inline-flex;
        align-items: center;
        gap: 8px;
        padding: 10px 12px;
        border-radius: 12px;
        border: 1px solid rgba(0, 0, 0, 0.08);
        background: #fff;
        color: var(--ink);
        cursor: pointer;
        margin-bottom: 10px;
        font-weight: 600;
        box-shadow: 0 8px 18px rgba(0, 0, 0, 0.06);
        transition: transform 0.12s ease, box-shadow 0.12s ease;
      }

      .nav-back:hover {
        transform: translateY(-1px);
        box-shadow: 0 12px 24px rgba(0, 0, 0, 0.08);
      }

      .nav-back .arrow {
        font-size: 16px;
        line-height: 1;
      }

      .hint {
        color: var(--muted);
        font-size: 12px;
        margin-left: 4px;
      }

      @media (max-width: 380px) {
        .grid {
          grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
        }

        header,
        main {
          padding-left: 14px;
          padding-right: 14px;
        }
      }
    </style>
  </head>
  <body>
    <header>
      <div class="header-inner">
        <div class="brand">
          <div>
            <h1 id="hero-title">Petit Gift Table</h1>
          </div>
        </div>
        <div class="flag-switch" aria-label="Language selection">
          <button
            class="flag flag-en active"
            data-lang="en"
            aria-label="English"
          ></button>
          <button
            class="flag flag-fr"
            data-lang="fr"
            aria-label="Français"
          ></button>
          <button
            class="flag flag-jp"
            data-lang="jp"
            aria-label="日本語"
          ></button>
        </div>
      </div>
    </header>

    <main>
      <div id="gallery" class="grid"></div>

      <section id="detail" class="detail hidden" aria-live="polite">
        <button class="nav-back" id="back-button" type="button">
          <span class="arrow" aria-hidden="true">←</span>
          <span id="back-label">Back to all gifts</span>
        </button>
        <div class="pill" id="detail-pill">Gift</div>
        <img id="detail-image" src="" alt="" />
        <h3 id="detail-title"></h3>
        <p id="detail-body"></p>
        <p class="hint" id="detail-hint">
          Tap the flags above to switch languages anytime.
        </p>
      </section>
    </main>

    <script>
      const copy = {
        en: {
          brandLabel: "Petit Gift Table",
          cardNote: "Tap for the note",
          back: "Back to all gifts",
          hint: "Tap the flags above to switch languages anytime.",
          pill: (index) => "Gift " + (index + 1),
        },
        fr: {
          brandLabel: "Table de petits cadeaux",
          cardNote: "Voir le détail",
          back: "Retour aux cadeaux",
          hint: "Vous pouvez changer de langue en haut à tout moment.",
          pill: (index) => "Cadeau " + (index + 1),
        },
        jp: {
          brandLabel: "プチギフトテーブル",
          cardNote: "タップして詳細を見る",
          back: "一覧に戻る",
          hint: "上のフラッグでいつでも言語を変えられます。",
          pill: (index) => "ギフト " + (index + 1),
        },
      };

      const gifts = [
        {
          id: "biberli",
          image: "images/biberly.jpg",
          palette: ["#dba57a", "#f2c69b"],
          translations: {
            en: {
              title: "Appenzell Biberli",
              description:
                "Spiced gingerbread with almond filling from the Swiss Alps.",
            },
            fr: {
              title: "Pain d'épices biberli",
              description:
                "Pain d'épices suisse garni d'amandes d'Appenzell.",
            },
            jp: {
              title: "ビーベルリ ジンジャーブレッド",
              description: "アッペンツェルのアーモンド入りスパイスケーキ。",
            },
          },
        },
        {
          id: "calisson",
          image: "images/calisson.jpg",
          palette: ["#f6d597", "#fff0c4"],
          translations: {
            en: {
              title: "Calisson d'Aix",
              description:
                "Almond and candied melon confection topped with white icing.",
            },
            fr: {
              title: "Calisson d'Aix",
              description:
                "Confiserie aux amandes et melon confit, nappée de glace royale.",
            },
            jp: {
              title: "カリソン・ダックス",
              description: "アーモンドとメロンの砂糖菓子に白いグラサージュ。",
            },
          },
        },
        {
          id: "sencha-tea",
          image: "images/green_tea.png",
          palette: ["#b9e774", "#e7f8bf"],
          translations: {
            en: {
              title: "Sencha Green Tea",
              description: "A bright cup of Japanese green tea to sip warm.",
            },
            fr: {
              title: "Tasse de thé vert",
              description: "Infusion de sencha vif à savourer chaud.",
            },
            jp: {
              title: "煎茶の一杯",
              description: "香り立つ煎茶をあたたかく。",
            },
          },
        },
        {
          id: "hot-chocolate",
          image: "images/hot_chocolat.png",
          palette: ["#d99e63", "#f7cf9d"],
          translations: {
            en: {
              title: "Hot Chocolate & Marshmallows",
              description: "Creamy hot chocolate served with two soft marshmallows.",
            },
            fr: {
              title: "Chocolat chaud guimauves",
              description: "Tasse de chocolat onctueux avec deux guimauves moelleuses.",
            },
            jp: {
              title: "マシュマロ入りホットチョコ",
              description:
                "濃厚チョコドリンクにふわふわマシュマロを浮かべて。",
            },
          },
        },
        {
          id: "butter-sand",
          image: "images/japanese_cookie.png",
          palette: ["#f5b76d", "#ffe1b0"],
          translations: {
            en: {
              title: "Butter Sand Cookie",
              description:
                "Buttery sandwich cookie with a hint of chocolate inside.",
            },
            fr: {
              title: "Biscuit sablé japonais",
              description:
                "Sablé sandwich au beurre avec une pointe de chocolat.",
            },
            jp: {
              title: "バターサンドクッキー",
              description:
                "バタークリームを挟んだビスケット、チョコのアクセント。",
            },
          },
        },
        {
          id: "napolitains",
          image: "images/napolitains.jpeg",
          palette: ["#bfc8ff", "#ffe0b4"],
          translations: {
            en: {
              title: "Cailler Napolitains",
              description: "Assorted Swiss mini chocolate bars to share.",
            },
            fr: {
              title: "Napolitains Cailler",
              description: "Assortiment de mini-tablettes suisses à partager.",
            },
            jp: {
              title: "カイエ ナポリタン",
              description: "スイスのミニチョコレート詰め合わせ。",
            },
          },
        },
        {
          id: "nougat",
          image: "images/nougat.webp",
          palette: ["#f7e9d7", "#fffdf5"],
          translations: {
            en: {
              title: "Almond Nougat Squares",
              description: "Soft white nougat dotted with roasted almond pieces.",
            },
            fr: {
              title: "Nougat tendre aux amandes",
              description: "Carrés de nougat blanc parsemé d'amandes croquantes.",
            },
            jp: {
              title: "アーモンドヌガー",
              description: "アーモンドがたっぷり入ったやわらかい白ヌガー。",
            },
          },
        },
        {
          id: "kaki-no-tane",
          image: "images/rice_crakers.png",
          palette: ["#ff9248", "#ffd29a"],
          translations: {
            en: {
              title: "Kaki no Tane Mix",
              description: "Spicy rice crackers and peanuts for crunchy snacking.",
            },
            fr: {
              title: "Mélange kaki no tane",
              description: "Crackers de riz pimentés et cacahuètes à grignoter.",
            },
            jp: {
              title: "柿の種ミックス",
              description: "ピリ辛の柿の種とピーナッツの定番スナック。",
            },
          },
        },
        {
          id: "alpine-tea",
          image: "images/swiss_tea.jpeg",
          palette: ["#c4d780", "#f2f7c5"],
          translations: {
            en: {
              title: "Alpine Herbal Infusion",
              description: "Mountain herbs brewed into a calming golden tea.",
            },
            fr: {
              title: "Infusion herbes alpines",
              description: "Thé d'herbes de montagne aux notes fleuries.",
            },
            jp: {
              title: "アルプスハーブティー",
              description: "山のハーブが香るすっきりしたブレンド。",
            },
          },
        },
      ];

      let currentLang = "en";
      let activeGiftId = null;

      const getHashId = () =>
        decodeURIComponent(location.hash.replace(/^#/, "") || "");

      function makeImage(title, colorA, colorB) {
        const svg = `
          <svg width="640" height="480" viewBox="0 0 640 480" xmlns="http://www.w3.org/2000/svg">
            <defs>
              <linearGradient id="grad" x1="0%" y1="0%" x2="100%" y2="100%">
                <stop offset="0%" stop-color="${colorA}" />
                <stop offset="100%" stop-color="${colorB}" />
              </linearGradient>
            </defs>
            <rect width="640" height="480" fill="url(#grad)" rx="32" />
            <circle cx="520" cy="80" r="60" fill="rgba(255,255,255,0.55)" />
            <circle cx="120" cy="420" r="80" fill="rgba(255,255,255,0.4)" />
            <rect x="180" y="150" width="280" height="190" rx="26" fill="rgba(255,255,255,0.65)" />
            <text x="320" y="260" font-family="Avenir, sans-serif" font-size="34" font-weight="700" fill="#2c2c2c" text-anchor="middle">${title}</text>
          </svg>`;
        return "data:image/svg+xml," + encodeURIComponent(svg);
      }

      function buildGallery() {
        const gallery = document.getElementById("gallery");
        gallery.innerHTML = "";
        const langCopy = copy[currentLang];

        gifts.forEach((gift, index) => {
          const langEntry = gift.translations[currentLang];
          const card = document.createElement("button");
          card.className = "gift-card";
          card.type = "button";
          card.setAttribute(
            "aria-label",
            `${langEntry.title}. ${langCopy.cardNote}.`
          );

          const img = document.createElement("img");
          img.src =
            gift.image ||
            makeImage(langEntry.title, gift.palette[0], gift.palette[1]);
          img.alt = langEntry.title;
          gift.image = img.src;

          const pill = document.createElement("div");
          pill.className = "pill";
          pill.textContent = langCopy.pill(index);

          const title = document.createElement("div");
          title.className = "card-title";
          title.textContent = langEntry.title;

          const note = document.createElement("p");
          note.className = "card-note";
          note.textContent = langCopy.cardNote;

          card.appendChild(pill);
          card.appendChild(img);
          card.appendChild(title);
          card.appendChild(note);
          card.addEventListener("click", () => openGift(gift.id));
          gallery.appendChild(card);
        });

        document.getElementById("hero-title").textContent = langCopy.brandLabel;
        document.getElementById("back-label").textContent = langCopy.back;
        document.getElementById("detail-hint").textContent = langCopy.hint;

        if (activeGiftId) {
          openGift(activeGiftId, { skipHash: true });
        }
      }

      function openGift(id, options = {}) {
        const { skipHash = false } = options;
        const gift = gifts.find((g) => g.id === id);
        if (!gift) return;
        activeGiftId = id;
        const langEntry = gift.translations[currentLang];
        const index = gifts.indexOf(gift);
        const langCopy = copy[currentLang];

        document.getElementById("gallery").classList.add("hidden");
        const detail = document.getElementById("detail");
        detail.classList.remove("hidden");

        document.getElementById("detail-image").src = gift.image;
        document.getElementById("detail-image").alt = langEntry.title;
        document.getElementById("detail-title").textContent = langEntry.title;
        document.getElementById("detail-body").textContent =
          langEntry.description;
        document.getElementById("detail-pill").textContent =
          langCopy.pill(index);
        detail.style.background = `linear-gradient(145deg, ${gift.palette[0]} 0%, ${gift.palette[1]} 100%)`;

        window.scrollTo({ top: 0, behavior: "smooth" });

        if (!skipHash) {
          location.hash = encodeURIComponent(id);
        }
      }

      function backToGallery() {
        activeGiftId = null;
        if (location.hash) {
          history.replaceState(null, "", location.pathname + location.search);
        }
        document.getElementById("detail").classList.add("hidden");
        document.getElementById("gallery").classList.remove("hidden");
        document.getElementById("detail").style.background = "";
        window.scrollTo({ top: 0, behavior: "smooth" });
      }

      function wireLanguageButtons() {
        document.querySelectorAll(".flag").forEach((btn) => {
          btn.addEventListener("click", () => {
            currentLang = btn.dataset.lang;
            document
              .querySelectorAll(".flag")
              .forEach((b) => b.classList.toggle("active", b === btn));
            buildGallery();
          });
        });
      }

      function syncFromHash() {
        const hashId = getHashId();
        const exists = gifts.some((g) => g.id === hashId);
        if (hashId && exists) {
          openGift(hashId, { skipHash: true });
        } else {
          backToGallery();
        }
      }

      const initialHash = getHashId();
      if (initialHash && gifts.some((g) => g.id === initialHash)) {
        activeGiftId = initialHash;
      }

      document
        .getElementById("back-button")
        .addEventListener("click", backToGallery);
      wireLanguageButtons();
      buildGallery();
      window.addEventListener("hashchange", syncFromHash);
      syncFromHash();
    </script>
  </body>
</html>
